// Directly embed the JSON data
const data = {
"query4":
[{"no_of_models":1,"track":" To QlikSense"},{"no_of_models":18,"track":"Cognos To QlikSense"},{"no_of_models":1,"track":"cognos to powerbi"},{"no_of_models":1,"track":"cognos to qliksense"},{"no_of_models":13,"track":"mstr to powerbi"},{"no_of_models":1,"track":"mstrtopbi"},{"no_of_models":1,"track":"mstrtopowerbi"},{"no_of_models":41,"track":"obiee to powerbi"},{"no_of_models":68,"track":"qliksense to powerbi"},{"no_of_models":56,"track":"tableau to powerbi"},{"no_of_models":1,"track":"track"}],
"query5":
[{"no_of_models":1,"track":" To QlikSense"},{"no_of_models":18,"track":"Cognos To QlikSense"},{"no_of_models":1,"track":"cognos to powerbi"},{"no_of_models":1,"track":"cognos to qliksense"},{"no_of_models":13,"track":"mstr to powerbi"},{"no_of_models":1,"track":"mstrtopbi"},{"no_of_models":1,"track":"mstrtopowerbi"},{"no_of_models":41,"track":"obiee to powerbi"},{"no_of_models":68,"track":"qliksense to powerbi"},{"no_of_models":56,"track":"tableau to powerbi"},{"no_of_models":1,"track":"track"}],
"query6":
[{"no_of_models":1,"track":" To QlikSense"},{"no_of_models":18,"track":"Cognos To QlikSense"},{"no_of_models":1,"track":"cognos to powerbi"},{"no_of_models":1,"track":"cognos to qliksense"},{"no_of_models":13,"track":"mstr to powerbi"},{"no_of_models":1,"track":"mstrtopbi"},{"no_of_models":1,"track":"mstrtopowerbi"},{"no_of_models":41,"track":"obiee to powerbi"},{"no_of_models":68,"track":"qliksense to powerbi"},{"no_of_models":56,"track":"tableau to powerbi"},{"no_of_models":1,"track":"track"}],
"query1":
[{"no_of_models":1,"track":" To QlikSense"},{"no_of_models":18,"track":"Cognos To QlikSense"},{"no_of_models":1,"track":"cognos to powerbi"},{"no_of_models":1,"track":"cognos to qliksense"},{"no_of_models":13,"track":"mstr to powerbi"},{"no_of_models":1,"track":"mstrtopbi"},{"no_of_models":1,"track":"mstrtopowerbi"},{"no_of_models":41,"track":"obiee to powerbi"},{"no_of_models":68,"track":"qliksense to powerbi"},{"no_of_models":56,"track":"tableau to powerbi"},{"no_of_models":1,"track":"track"}],
"query2":
[{"count":17540,"layer":""},{"count":2,"layer":"Model-"},{"count":30,"layer":"Model-5thNov2024_QSSASNF_Prod"},{"count":26,"layer":"Model-AOG Finance Datamart"},{"count":12,"layer":"Model-ARCM DWH_G7"},{"count":19,"layer":"Model-Claims MNLR"},{"count":48,"layer":"Model-Cognos_GeniusCanada_Sample_G1"},{"count":48,"layer":"Model-Cognos_GeniusCanada_Sample_G2"},{"count":48,"layer":"Model-Cognos_GeniusCanada_Sample_G3"},{"count":48,"layer":"Model-Cognos_GeniusCanada_Sample_G4"},{"count":72,"layer":"Model-EuropeDatamart_Test"},{"count":4,"layer":"Model-EuropeDatamart_Test-09-09-2"},{"count":3,"layer":"Model-EuropeDatamart_Test-Calc"},{"count":5,"layer":"Model-EuropeDatamart_Test_G1"},{"count":5,"layer":"Model-EuropeDatamart_Test_G2"},{"count":3,"layer":"Model-EuropeDatamart_Test_G3"},{"count":11,"layer":"Model-EuropeDatamart_Upd"},{"count":1,"layer":"Model-GeniusCanada_Sample"},{"count":12,"layer":"Model-MSTR_Claimns_Mnlr_Model.xlsx"},{"count":31,"layer":"Model-OBIEE_project"},{"count":1,"layer":"Model-OpenItems_Sample"},{"count":85,"layer":"Model-PCW"},{"count":1,"layer":"Model-Parent_child_hierarchy"},{"count":9,"layer":"Model-Project"},{"count":3,"layer":"Model-QlikSense_Monthly_Capex_Tracking_21_Aug"},{"count":41,"layer":"Model-Relational Model Project"},{"count":1,"layer":"Model-Relational Model Project Test List Groups"},{"count":1,"layer":"Model-Relational Model Project_multiDs"},{"count":144,"layer":"Model-SBS"},{"count":13,"layer":"Model-SBS Ledgers"},{"count":4,"layer":"Model-SBS_Invoice"},{"count":8,"layer":"Model-Samplestore"},{"count":10,"layer":"Model-Snowflake_QSSA_prod"},{"count":10,"layer":"Model-Snowflake_QSSA_prod 2"},{"count":10,"layer":"Model-Snowflake_QSSA_prod_UsageTracking"},{"count":10,"layer":"Model-Snowflake_QSSA_prod_UsageTracking1"},{"count":10,"layer":"Model-Snowflake_QSSA_prod_new"},{"count":12,"layer":"Model-Tableau_federated.0gli1gy1wzt2k3190ejmr1tp9gaq"},{"count":216,"layer":"Model-Tableau_federated.0h74v1c0uoz17s1exi4mf11lvo0u"},{"count":3,"layer":"Model-Tableau_federated.0ovs1ly0vaflh41bgmt6s19u13h5"},{"count":6,"layer":"Model-Tableau_federated.0punru20mn6nsb14umsv20cc8gk7"},{"count":3,"layer":"Model-Tableau_federated.174cwoc0hex3cu18xbwx80tmqtvj"},{"count":12,"layer":"Model-Tableau_federated.1vswshc0npt7vj1avmgri0dbckh0"},{"count":35,"layer":"Report-"},{"count":1896,"layer":"Report-273511 national Program Management Commision report for Mary"},{"count":786,"layer":"Report-400_APP_Capex_GO"},{"count":150,"layer":"Report-A and H Renewals_Datamodule"},{"count":31,"layer":"Report-All Open Items by Transaction Code"},{"count":18,"layer":"Report-All Open Items by Transaction Code-10-04"},{"count":16,"layer":"Report-All Open Items by Transaction Code-7"},{"count":74,"layer":"Report-All Open Items by Transaction Code-8"},{"count":1,"layer":"Report-BubbleChart"},{"count":4,"layer":"Report-BubbleChart-30"},{"count":80,"layer":"Report-CLAIMSMNLRDB"},{"count":200,"layer":"Report-Claims-MNLR"},{"count":150,"layer":"Report-ClaimsActuarialDetails"},{"count":24,"layer":"Report-ClaimsAllFeatire0910"},{"count":24,"layer":"Report-ClaimsDemoReport"},{"count":62,"layer":"Report-ClaimsMNLRallFeaturesReport"},{"count":10,"layer":"Report-ClaimsMNLRallFeaturesReport-2"},{"count":2,"layer":"Report-ClaimsMNLRreport"},{"count":108,"layer":"Report-ClaimsReportMultiplePages"},{"count":66,"layer":"Report-ClaimsUpdatedReport"},{"count":15,"layer":"Report-CogToPowerBIFeatures"},{"count":97,"layer":"Report-CogToQlikFeature"},{"count":18,"layer":"Report-CogToQlikFeature-06-09-2"},{"count":12,"layer":"Report-CogToQlikFeature-19"},{"count":1,"layer":"Report-CogToQlikFeature-2208"},{"count":1,"layer":"Report-CogToQlikFeature-3"},{"count":24,"layer":"Report-CognosClaimsReport"},{"count":249,"layer":"Report-CognosToQlikFinalReport"},{"count":32,"layer":"Report-CognosToQlikFinalReport-09-09"},{"count":1,"layer":"Report-ContextContainsRangeFilterTwb"},{"count":3,"layer":"Report-Customerdetailreport"},{"count":4,"layer":"Report-Customermappingdepartmentreport"},{"count":4,"layer":"Report-Customermappingskillreport"},{"count":118,"layer":"Report-Derivedexpressionreport"},{"count":17,"layer":"Report-Detail Report"},{"count":34,"layer":"Report-Detail_Report"},{"count":20,"layer":"Report-DigitalExpMonthly"},{"count":25,"layer":"Report-Digital_Exp_Monthly"},{"count":66,"layer":"Report-EuropeDatamartMultiplePages"},{"count":20,"layer":"Report-EuropeMultiplePagesUpdatedData"},{"count":70,"layer":"Report-GeniusCanadaReport"},{"count":3,"layer":"Report-GeographicClaimInformations"},{"count":77,"layer":"Report-GroupingReport1"},{"count":87,"layer":"Report-GroupingReport2"},{"count":4,"layer":"Report-GroupingReport3"},{"count":12,"layer":"Report-GroupingReport4"},{"count":64,"layer":"Report-Hierarchy"},{"count":16,"layer":"Report-Insurance Fraud Analysis(1)_Report(Updated Demo sample)"},{"count":5,"layer":"Report-Insurance Fraud Analysis(1)_all charts"},{"count":17,"layer":"Report-JUPITER"},{"count":50,"layer":"Report-JUPITER MCC 80325-80327v2"},{"count":17,"layer":"Report-JUPITERMCC80325-80327v2"},{"count":96,"layer":"Report-Latestsamplecoveringallfeaturespart2"},{"count":4,"layer":"Report-ListGroupingReport"},{"count":252,"layer":"Report-LizReport"},{"count":42,"layer":"Report-LossRatioReport"},{"count":36,"layer":"Report-LossRatioReport(DRAFT)multi1"},{"count":13,"layer":"Report-LossRatioReport(DRAFT)multi1-2208-18"},{"count":34,"layer":"Report-LossRatioReport(DRAFT)multi1-28-11"},{"count":8,"layer":"Report-MultpleSourceReport"},{"count":177,"layer":"Report-New report"},{"count":13,"layer":"Report-New report Test List Groups"},{"count":2,"layer":"Report-New report hit-6-9-24"},{"count":3,"layer":"Report-New report-05-09"},{"count":1,"layer":"Report-New report-05-09-2"},{"count":18,"layer":"Report-New report-06-09-2"},{"count":5,"layer":"Report-New report-2-1"},{"count":1,"layer":"Report-New report-3"},{"count":4,"layer":"Report-New report-3-1"},{"count":1,"layer":"Report-New report-es-3-1"},{"count":1,"layer":"Report-New report1"},{"count":33,"layer":"Report-PATIENT REACH(1)(1)"},{"count":1,"layer":"Report-PRofit_Sales_REport"},{"count":96,"layer":"Report-PS_LEDGER"},{"count":16,"layer":"Report-Patient Reach(1)(1)"},{"count":48,"layer":"Report-Policies with FAC - test"},{"count":22,"layer":"Report-Product_Details_Report"},{"count":50,"layer":"Report-Product_Details_Report-1-1"},{"count":9,"layer":"Report-Product_Details_Report-hi--1-1"},{"count":2,"layer":"Report-Profit_By_year/PRoduct"},{"count":30,"layer":"Report-PromptsAllReport"},{"count":2,"layer":"Report-Report"},{"count":20,"layer":"Report-SBS (TB Pckage )-C11"},{"count":25,"layer":"Report-SBS Trial Bal Cas \u0026 ESIS - By Client for 3134"},{"count":2,"layer":"Report-Sales_Report"},{"count":7,"layer":"Report-Sales_Report-ti-4-1"},{"count":76,"layer":"Report-calculation_report"},{"count":4,"layer":"Report-calculation_report-01-10"},{"count":2,"layer":"Report-cust_purchase_expression_demo"},{"count":125,"layer":"Report-testing"},{"count":1,"layer":"layer"}],
"query3":
[{"no_of_models":1,"track":" To QlikSense"},{"no_of_models":18,"track":"Cognos To QlikSense"},{"no_of_models":1,"track":"cognos to powerbi"},{"no_of_models":1,"track":"cognos to qliksense"},{"no_of_models":13,"track":"mstr to powerbi"},{"no_of_models":1,"track":"mstrtopbi"},{"no_of_models":1,"track":"mstrtopowerbi"},{"no_of_models":41,"track":"obiee to powerbi"},{"no_of_models":68,"track":"qliksense to powerbi"},{"no_of_models":56,"track":"tableau to powerbi"},{"no_of_models":1,"track":"track"}],
"query7":
[{"no_of_models":1,"track":" To QlikSense"},{"no_of_models":18,"track":"Cognos To QlikSense"},{"no_of_models":1,"track":"cognos to powerbi"},{"no_of_models":1,"track":"cognos to qliksense"},{"no_of_models":13,"track":"mstr to powerbi"},{"no_of_models":1,"track":"mstrtopbi"},{"no_of_models":1,"track":"mstrtopowerbi"},{"no_of_models":41,"track":"obiee to powerbi"},{"no_of_models":68,"track":"qliksense to powerbi"},{"no_of_models":56,"track":"tableau to powerbi"},{"no_of_models":1,"track":"track"}],
"query8":
[{"no_of_models":1,"track":" To QlikSense"},{"no_of_models":18,"track":"Cognos To QlikSense"},{"no_of_models":1,"track":"cognos to powerbi"},{"no_of_models":1,"track":"cognos to qliksense"},{"no_of_models":13,"track":"mstr to powerbi"},{"no_of_models":1,"track":"mstrtopbi"},{"no_of_models":1,"track":"mstrtopowerbi"},{"no_of_models":41,"track":"obiee to powerbi"},{"no_of_models":68,"track":"qliksense to powerbi"},{"no_of_models":56,"track":"tableau to powerbi"},{"no_of_models":1,"track":"track"}],
"query9":
[{"no_of_models":1,"track":" To QlikSense"},{"no_of_models":18,"track":"Cognos To QlikSense"},{"no_of_models":1,"track":"cognos to powerbi"},{"no_of_models":1,"track":"cognos to qliksense"},{"no_of_models":13,"track":"mstr to powerbi"},{"no_of_models":1,"track":"mstrtopbi"},{"no_of_models":1,"track":"mstrtopowerbi"},{"no_of_models":41,"track":"obiee to powerbi"},{"no_of_models":68,"track":"qliksense to powerbi"},{"no_of_models":56,"track":"tableau to powerbi"},{"no_of_models":1,"track":"track"}]

};
/*
// Extract data for the Pie Chart
const queryKey = "query3"; // Key for your dataset
const jsonData = data[queryKey];

// Map labels and values
const xValues = jsonData.map(item => item.track);
const yValues = jsonData.map(item => item.no_of_models);

// Define colors for the Pie Chart
const barColors = [
  "#b91d47", "#00aba9", "#2b5797", "#e8c3b9", "#1e7145",
  "#ff6384", "#36a2eb", "#cc65fe", "#ffce56", "#ffa600", "#003f5c"
];

// Render the Pie Chart
new Chart("myChart", {
  type: "pie",
  data: {
    labels: xValues,
    datasets: [{
      backgroundColor: barColors,
      data: yValues
    }]
  },
  options: {
    title: {
      display: true,
      text: "App Summary by Track"
    }
  },
  
  tooltips: {
      callbacks: {
        // Customize the label for tooltips
        label: function(tooltipItem, chartData) {
          const dataset = chartData.datasets[tooltipItem.datasetIndex];
          const currentValue = dataset.data[tooltipItem.index];
          const label = chartData.labels[tooltipItem.index];
          const percentage = ((currentValue / total) * 100).toFixed(2);
          return `${label}: ${currentValue} models (${percentage}%)`;
        }
      }
    }
  });
*/

const chartConfigs = [
  { queryKey: "query4", type: "pie", labelField: "track", valueField: "no_of_models", title: "Query 4 - Pie Chart" },
  { queryKey: "query5", type: "bar", labelField: "track", valueField: "no_of_models", title: "Query 5 - Bar Chart" },
  { queryKey: "query6", type: "doughnut", labelField: "track", valueField: "no_of_models", title: "Query 6 - Doughnut Chart" },
  { queryKey: "query1", type: "bar", labelField: "track", valueField: "no_of_models", title: "Query 1 - Bar Chart" },
  { queryKey: "query2", type: "line", labelField: "layer", valueField: "count", title: "Query 2 - Line Chart" },
  { queryKey: "query3", type: "bar", labelField: "track", valueField: "no_of_models", title: "Query 3 - Bar Chart" },
    { queryKey: "query7", type: "pie", labelField: "track", valueField: "no_of_models", title: "Query 3 - Bar Chart" },
  { queryKey: "query8", type: "pie", labelField: "track", valueField: "no_of_models", title: "Query 3 - Bar Chart" },
  { queryKey: "query9", type: "pie", labelField: "track", valueField: "no_of_models", title: "Query 3 - Bar Chart" }

];

// Function to render charts dynamically
function renderCharts() {
  chartConfigs.forEach((config, index) => {
    const queryData = data[config.queryKey];
    if (!queryData) {
      console.error(`Query data for ${config.queryKey} not found`);
      return;
    }

    // Extract labels and values based on configuration
    const labels = queryData.map(item => item[config.labelField]);
    const values = queryData.map(item => item[config.valueField]);

    // Define canvas context
    const ctx = document.getElementById(`chart${index + 1}`).getContext("2d");

    // Render chart using Chart.js
    new Chart(ctx, {
      type: config.type,
      data: {
        labels: labels,
        datasets: [{
          data: values,
          backgroundColor: [
            "#ff6384", "#36a2eb", "#cc65fe", "#ffce56", "#4bc0c0", "#9966ff", "#ff9f40", "#c9cbcf"
          ]
        }]
      },
      options: {
        responsive: true,
        maintainAspectRatio: false,
        plugins: {
          legend: {
            display: true,
            position: "top"
          },
          title: {
            display: true,
            text: config.title
          }
        }
      }
    });
  });
}

// Ensure DOM content is loaded before rendering charts
document.addEventListener("DOMContentLoaded", renderCharts);